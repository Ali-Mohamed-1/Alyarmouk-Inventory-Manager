  Determining projects to restore...
  All projects are up-to-date for restore.
  Inventory.Domain -> H:\Khaled2\Alyarmouk-Inventory-Manager\src\Inventory.Domain\bin\Debug\net9.0\Inventory.Domain.dll
  Inventory.Application -> H:\Khaled2\Alyarmouk-Inventory-Manager\src\Inventory.Application\bin\Debug\net9.0\Inventory.Application.dll
  Inventory.Infrastructure -> H:\Khaled2\Alyarmouk-Inventory-Manager\src\Inventory.Infrastructure\bin\Debug\net9.0\Inventory.Infrastructure.dll
  Inventory.UnitTests -> H:\Khaled2\Alyarmouk-Inventory-Manager\tests\Inventory.UnitTests\bin\Debug\net9.0\Inventory.UnitTests.dll
Test run for H:\Khaled2\Alyarmouk-Inventory-Manager\tests\Inventory.UnitTests\bin\Debug\net9.0\Inventory.UnitTests.dll (.NETCoreApp,Version=v9.0)
VSTest version 17.12.0 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
  Failed Inventory.UnitTests.PaymentInvariantTests.SalesOrder_AddPayment_EnforcesPartialPayment [955 ms]
  Error Message:
   System.InvalidOperationException : Invalid payment state for SalesOrder 1: RemainingAmount (($1.00)) is negative. Total: $99.00, Paid: $100.00
  Stack Trace:
     at Inventory.Domain.Entities.SalesOrder.RecalculatePaymentStatus() in H:\Khaled2\Alyarmouk-Inventory-Manager\src\Inventory.Domain\Entities\SalesOrder.cs:line 80
   at Inventory.Infrastructure.Services.SalesOrderServices.AddPaymentAsync(Int64 orderId, CreatePaymentRequest req, UserContext user, CancellationToken ct) in H:\Khaled2\Alyarmouk-Inventory-Manager\src\Inventory.Infrastructure\Services\SalesOrderServices.cs:line 372
   at Inventory.Infrastructure.Services.SalesOrderServices.AddPaymentAsync(Int64 orderId, CreatePaymentRequest req, UserContext user, CancellationToken ct) in H:\Khaled2\Alyarmouk-Inventory-Manager\src\Inventory.Infrastructure\Services\SalesOrderServices.cs:line 386
   at Inventory.Infrastructure.Services.SalesOrderServices.AddPaymentAsync(Int64 orderId, CreatePaymentRequest req, UserContext user, CancellationToken ct) in H:\Khaled2\Alyarmouk-Inventory-Manager\src\Inventory.Infrastructure\Services\SalesOrderServices.cs:line 387
   at Inventory.UnitTests.PaymentInvariantTests.SalesOrder_AddPayment_EnforcesPartialPayment() in H:\Khaled2\Alyarmouk-Inventory-Manager\tests\Inventory.UnitTests\PaymentInvariantTests.cs:line 155
--- End of stack trace from previous location ---

Failed!  - Failed:     1, Passed:     0, Skipped:     0, Total:     1, Duration: 955 ms - Inventory.UnitTests.dll (net9.0)
